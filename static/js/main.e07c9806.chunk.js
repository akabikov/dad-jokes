(this["webpackJsonpdad-jokes"]=this["webpackJsonpdad-jokes"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){e.exports=n(23)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),i=(n(17),n(8)),s=n(7),u=n(1),l=n.n(u),d=n(6),m=n(2),f=n(3),p=n(5),h=n(4),k=n(11),v=(n(19),{up:1,down:-1}),j=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){var n=e.props;(0,n.vote)(n.id,v[t.target.name])},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.rating,t=+e>0?"positive":+e<0?"negative":"neutral";return r.a.createElement("div",{className:"Poll"},r.a.createElement("button",{name:"up",onClick:this.handleClick}),r.a.createElement("span",{className:t},e),r.a.createElement("button",{name:"down",onClick:this.handleClick}))}}]),n}(r.a.Component),g=(n(20),function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=e.text,n=Object(k.a)(e,["text"]);return r.a.createElement("div",{className:"JokeItem"},t,r.a.createElement(j,n))}}]),n}(r.a.Component)),b="https://icanhazdadjoke.com/",O={Accept:"application/json"};function y(){return(y=Object(d.a)(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(b,{headers:O});case 2:if(!(t=e.sent).ok){e.next=12;break}return e.next=6,t.json();case 6:return n=e.sent,a=n.id,r=n.joke,e.abrupt("return",{id:a,text:r});case 12:throw new Error("Can't load joke");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=function(){return y.apply(this,arguments)},w=(n(21),function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={jokes:[],isLoading:!1,orderByRating:!1},e.getJoke=function(){var t=Object(d.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E();case 2:if(a=t.sent,!n.has(a.id)){t.next=7;break}return t.next=6,e.getJoke(n);case 6:a=t.sent;case 7:return t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addBatchOfJokes=Object(d.a)(l.a.mark((function t(){var n,a,r,o,c,u,d=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=d.length>0&&void 0!==d[0]?d[0]:10,e.setState({isLoading:!0}),a=e.state.jokes,r=new Set(a.map((function(e){return e.id}))),o=new Array(n),c=0;case 6:if(!(c<n)){t.next=15;break}return t.next=9,e.getJoke(r);case 9:u=t.sent,o[c]=Object(s.a)(Object(s.a)({},u),{},{rating:0}),r.add(u.id);case 12:c++,t.next=6;break;case 15:a=[].concat(Object(i.a)(a),o),e.setState({jokes:a,isLoading:!1}),localStorage.setItem("jokes",JSON.stringify(a));case 18:case"end":return t.stop()}}),t)}))),e.handleGetMore=function(){e.addBatchOfJokes()},e.handleOrderBy=function(){e.setState((function(e){return{orderByRating:!e.orderByRating}}))},e.vote=function(t,n){e.setState((function(e){return{jokes:e.jokes.map((function(e){return e.id===t?Object(s.a)(Object(s.a)({},e),{},{rating:e.rating+n}):e}))}}))},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("jokes"));e?this.setState({jokes:e}):this.addBatchOfJokes()}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.jokes;t.jokes!==n&&localStorage.setItem("jokes",JSON.stringify(n))}},{key:"render",value:function(){var e=this,t=this.state,n=t.jokes,a=t.isLoading,o=t.orderByRating,c=Object(i.a)(n);o&&c.sort((function(e,t){return t.rating-e.rating}));var s=c.map((function(t){return r.a.createElement("li",{key:t.id},r.a.createElement(g,Object.assign({},t,{vote:e.vote})))}));return r.a.createElement(r.a.Fragment,null,a?r.a.createElement("div",{className:"Loader"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement("button",{onClick:this.handleGetMore},"More jokes!"),r.a.createElement("button",{onClick:this.handleOrderBy},"Order by",o?" recency":" rating"))),r.a.createElement("main",null,r.a.createElement("ul",{className:"JokeList"},s))))}}]),n}(r.a.Component));n(22);var x=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[12,1,2]]]);
//# sourceMappingURL=main.e07c9806.chunk.js.map